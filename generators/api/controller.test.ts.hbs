import { beforeAll, describe, test } from "vitest";
import { {{ properCase name }}FakeRepository } from "@/lib/test-helper/{{ name }}";
import { createMiddleware } from "hono/factory";
import { container } from "tsyringe";
import { {{ name }} } from "./{{ name }}.controller";

const {{ name }}ContainerMiddleware = createMiddleware(async (c, next) => {
	container.register("I{{ properCase name }}", {
		useValue: new {{ properCase name }}FakeRepository(),
	});
	await next();
});

beforeAll(async () => {
	// TODO: 2回目以降の実行でエラーが出るので afterAll でミドルウェアを外したい
	try {
		{{ name }}.use("/", {{ name }}ContainerMiddleware);
	} catch (e) {}
});

describe("{{ name }}.controller", () => {
	test("controller が正常に呼び出されるかどうか", async () => {});
});
