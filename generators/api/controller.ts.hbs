import {{ properCase name }}Repository from "./{{ name }}.repository";
import {{ properCase name }}Service from "./{{ name }}.service";
import type { Env } from "env";
import { Hono } from "hono";
import { createMiddleware } from "hono/factory";
import { {{ properCase name }}FakeRepository } from "@/lib/test-helper/{{ name }}";

import { container } from "tsyringe";

const ROUTE = "/" as const

export const {{ name }}ContainerMiddleware = createMiddleware(async (c, next) => {
	container.register("I{{ properCase name }}", {
		useValue: new {{ properCase name }}FakeRepository(),
	});
	await next();
});

// 以下を index.tsx に追加
// {{ name }}.use(ROUTE, {{ name }}ContainerMiddleware);

export const {{ name }} = new Hono<Env>().get(ROUTE, async (c) => {
	const {{ name }} = container.resolve({{ properCase name }}Service);
});